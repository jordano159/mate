<%= simple_form_for([@eventable, @event], html: { class: 'form-inline' }) do |f| %>
  <%= f.error_notification %>
  <%= f.error_notification message: f.object.errors[:base].to_sentence if f.object.errors[:base].present? %>

  <%# types = %w(Group Head Axis) %>
  <%# all_names = Group.pluck(:name) + Head.pluck(:name) + Axis.pluck(:name) %>
  <%# types = [["קבוצה","Group"]["ראש","Head"]["ציר", "Axis"]] %>
  <div class="form-inputs">
    <%= f.input :content, label: "פירוט:" %>
    <%# f.input :eventable_type, collection: types, label: "קבוצה/ראש/ציר" %>
    <%# f.input :eventable_id, collection: all_names %>
    <div class="field">
      <%# f.label :eventable_id, "שם הקבוצה/ראש/ציר" %><br />
      <%# f.grouped_collection_select :eventable_id, types, :groups, :name, :id, :name, include_blank: true %>
  </div>
  </div>

  <div class="form-actions">
    <%= f.button :submit %>
  </div>
<% end %>


<script>
$(function() {
  var names;
  names = $('#event_eventable_id').html();
  console.log(names);
  return $('#event_type_id').change(function() {
    var type, options;
    type = $('#event__eventable_type :selected').text();
    options = $(names).filter("optgroup[label=" + type + "]").html();
    console.log(options);
    if (options) {
      return $('#event_eventable_id').html(options);
    } else {
      return $('#event_eventable_id').empty();
    }
  });
});
</script>
